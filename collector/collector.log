2025-08-30 14:24:06,023 - ERROR - Error connecting to supabase db: could not translate host name "db.eeqtlwcodbhcwatozewk.supabase.co" to address: nodename nor servname provided, or not known
Traceback (most recent call last):
  File "/Users/ayoomotosho/projects/snackindex/collector/db_utils.py", line 19, in connect_db
    connection = psycopg2.connect(
        host=os.getenv("DB_HOST"),
    ...<3 lines>...
        dbname=os.getenv("DB_NAME"),
    )
  File "/Users/ayoomotosho/projects/snackindex/collector/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not translate host name "db.eeqtlwcodbhcwatozewk.supabase.co" to address: nodename nor servname provided, or not known

2025-08-31 14:02:32,733 - INFO - Connection to Supabase DB successful
2025-08-31 14:02:32,733 - INFO - Fectching Data:
2025-08-31 14:02:32,809 - INFO - Starting the Snack Index data collection pipeline.
2025-08-31 14:02:32,811 - INFO - Processing: coca-cola
2025-08-31 14:02:33,185 - INFO - Searching Reddit for query: '"Coca cola" OR "Coke"'
2025-08-31 14:02:33,747 - INFO - Searching NewsAPI for query: '("Coca cola" OR "Coke") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:34,095 - INFO - Starting Stock Price Lookup for KO
2025-08-31 14:02:34,323 - INFO - Successfully saved metrics for snack_id: 9
2025-08-31 14:02:34,325 - INFO - Finished processing for coca-cola. Log summary:
2025-08-31 14:02:34,325 - INFO - Google Trends Score: 63
2025-08-31 14:02:34,325 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:34,325 - INFO - News Articles: 14, Avg Sentiment: -0.0869
2025-08-31 14:02:34,325 - INFO - Stock Price for KO: $68.99
2025-08-31 14:02:34,325 - INFO - Processing: hot-cheetos
2025-08-31 14:02:34,707 - INFO - Searching Reddit for query: '"Hot Cheetos" OR "Flamin Hot Cheetos"'
2025-08-31 14:02:35,091 - INFO - Searching NewsAPI for query: '("Hot Cheetos" OR "Flamin Hot Cheetos") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:35,379 - INFO - Starting Stock Price Lookup for PEP
2025-08-31 14:02:35,515 - INFO - Successfully saved metrics for snack_id: 4
2025-08-31 14:02:35,515 - INFO - Finished processing for hot-cheetos. Log summary:
2025-08-31 14:02:35,515 - INFO - Google Trends Score: 25
2025-08-31 14:02:35,515 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:35,515 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:35,515 - INFO - Stock Price for PEP: $148.65
2025-08-31 14:02:35,515 - INFO - Processing: goldfish-crackers
2025-08-31 14:02:35,825 - INFO - Searching Reddit for query: '"Goldfish Crackers"'
2025-08-31 14:02:36,010 - INFO - Searching NewsAPI for query: '("Goldfish Crackers") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:36,128 - INFO - Starting Stock Price Lookup for CPB
2025-08-31 14:02:36,262 - INFO - Successfully saved metrics for snack_id: 20
2025-08-31 14:02:36,262 - INFO - Finished processing for goldfish-crackers. Log summary:
2025-08-31 14:02:36,262 - INFO - Google Trends Score: 0
2025-08-31 14:02:36,262 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:36,262 - INFO - News Articles: 2, Avg Sentiment: -0.2253
2025-08-31 14:02:36,262 - INFO - Stock Price for CPB: $31.93
2025-08-31 14:02:36,262 - INFO - Processing: gatorade
2025-08-31 14:02:36,596 - INFO - Searching Reddit for query: '"Gatorade"'
2025-08-31 14:02:37,002 - INFO - Searching NewsAPI for query: '("Gatorade") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:37,287 - INFO - Using cached stock price for PEP: $148.65
2025-08-31 14:02:37,401 - INFO - Successfully saved metrics for snack_id: 11
2025-08-31 14:02:37,401 - INFO - Finished processing for gatorade. Log summary:
2025-08-31 14:02:37,401 - INFO - Google Trends Score: 63
2025-08-31 14:02:37,401 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:37,401 - INFO - News Articles: 2, Avg Sentiment: -0.1348
2025-08-31 14:02:37,401 - INFO - Stock Price for PEP: $148.65
2025-08-31 14:02:37,401 - INFO - Processing: reese's-peanut-butter-cups
2025-08-31 14:02:37,741 - INFO - Searching Reddit for query: '"Reese's Peanut Butter Cups"'
2025-08-31 14:02:38,116 - INFO - Searching NewsAPI for query: '("Reese's Peanut Butter Cups") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:38,372 - INFO - Starting Stock Price Lookup for HSY
2025-08-31 14:02:38,519 - INFO - Successfully saved metrics for snack_id: 17
2025-08-31 14:02:38,520 - INFO - Finished processing for reese's-peanut-butter-cups. Log summary:
2025-08-31 14:02:38,520 - INFO - Google Trends Score: 0
2025-08-31 14:02:38,520 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:38,520 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:38,520 - INFO - Stock Price for HSY: $183.75
2025-08-31 14:02:38,520 - INFO - Processing: lay's
2025-08-31 14:02:38,859 - INFO - Searching Reddit for query: '"Lay's"'
2025-08-31 14:02:39,666 - INFO - Searching NewsAPI for query: '("Lay's") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:39,936 - INFO - Using cached stock price for PEP: $148.65
2025-08-31 14:02:40,032 - INFO - Successfully saved metrics for snack_id: 12
2025-08-31 14:02:40,032 - INFO - Finished processing for lay's. Log summary:
2025-08-31 14:02:40,032 - INFO - Google Trends Score: 0
2025-08-31 14:02:40,032 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:40,032 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:40,032 - INFO - Stock Price for PEP: $148.65
2025-08-31 14:02:40,032 - INFO - Processing: doritos
2025-08-31 14:02:40,335 - INFO - Searching Reddit for query: '"Doritos"'
2025-08-31 14:02:40,747 - INFO - Searching NewsAPI for query: '("Doritos") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:41,025 - INFO - Using cached stock price for PEP: $148.65
2025-08-31 14:02:41,122 - INFO - Successfully saved metrics for snack_id: 10
2025-08-31 14:02:41,122 - INFO - Finished processing for doritos. Log summary:
2025-08-31 14:02:41,122 - INFO - Google Trends Score: 52
2025-08-31 14:02:41,122 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:41,122 - INFO - News Articles: 2, Avg Sentiment: 0.4803
2025-08-31 14:02:41,122 - INFO - Stock Price for PEP: $148.65
2025-08-31 14:02:41,124 - INFO - Processing: hershey's-bar
2025-08-31 14:02:41,511 - INFO - Searching Reddit for query: '"Hershey's Bar"'
2025-08-31 14:02:41,718 - INFO - Searching NewsAPI for query: '("Hershey's Bar") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:42,000 - INFO - Using cached stock price for HSY: $183.75
2025-08-31 14:02:42,097 - INFO - Successfully saved metrics for snack_id: 18
2025-08-31 14:02:42,097 - INFO - Finished processing for hershey's-bar. Log summary:
2025-08-31 14:02:42,097 - INFO - Google Trends Score: 0
2025-08-31 14:02:42,097 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:42,097 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:42,097 - INFO - Stock Price for HSY: $183.75
2025-08-31 14:02:42,097 - INFO - Processing: cheez-it
2025-08-31 14:02:42,413 - INFO - Searching Reddit for query: '"Cheez-it"'
2025-08-31 14:02:42,835 - INFO - Searching NewsAPI for query: '("Cheez-it") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:42,945 - INFO - Starting Stock Price Lookup for K
2025-08-31 14:02:43,079 - INFO - Successfully saved metrics for snack_id: 2
2025-08-31 14:02:43,079 - INFO - Finished processing for cheez-it. Log summary:
2025-08-31 14:02:43,079 - INFO - Google Trends Score: 0
2025-08-31 14:02:43,079 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:43,079 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:43,079 - INFO - Stock Price for K: $79.5
2025-08-31 14:02:43,079 - INFO - Processing: ruffles
2025-08-31 14:02:43,390 - INFO - Searching Reddit for query: '"Ruffles"'
2025-08-31 14:02:44,143 - INFO - Searching NewsAPI for query: '("Ruffles") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:44,250 - INFO - Using cached stock price for PEP: $148.65
2025-08-31 14:02:44,347 - INFO - Successfully saved metrics for snack_id: 15
2025-08-31 14:02:44,347 - INFO - Finished processing for ruffles. Log summary:
2025-08-31 14:02:44,347 - INFO - Google Trends Score: 0
2025-08-31 14:02:44,347 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:44,347 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:44,348 - INFO - Stock Price for PEP: $148.65
2025-08-31 14:02:44,348 - INFO - Processing: mountain-dew
2025-08-31 14:02:44,710 - INFO - Searching Reddit for query: '"Mountain Dew"'
2025-08-31 14:02:45,317 - INFO - Searching NewsAPI for query: '("Mountain Dew") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:45,428 - INFO - Using cached stock price for PEP: $148.65
2025-08-31 14:02:45,524 - INFO - Successfully saved metrics for snack_id: 13
2025-08-31 14:02:45,524 - INFO - Finished processing for mountain-dew. Log summary:
2025-08-31 14:02:45,525 - INFO - Google Trends Score: 45
2025-08-31 14:02:45,525 - INFO - Reddit Mentions: 2, Avg Sentiment: 0.6104
2025-08-31 14:02:45,525 - INFO - News Articles: 1, Avg Sentiment: 0.1531
2025-08-31 14:02:45,525 - INFO - Stock Price for PEP: $148.65
2025-08-31 14:02:45,525 - INFO - Processing: ritz-crackers
2025-08-31 14:02:45,860 - INFO - Searching Reddit for query: '"Ritz Crackers"'
2025-08-31 14:02:46,275 - INFO - Searching NewsAPI for query: '("Ritz Crackers") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:46,367 - INFO - Starting Stock Price Lookup for MDLZ
2025-08-31 14:02:46,507 - INFO - Successfully saved metrics for snack_id: 21
2025-08-31 14:02:46,507 - INFO - Finished processing for ritz-crackers. Log summary:
2025-08-31 14:02:46,507 - INFO - Google Trends Score: 0
2025-08-31 14:02:46,507 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:46,507 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:46,507 - INFO - Stock Price for MDLZ: $61.44
2025-08-31 14:02:46,507 - INFO - Processing: oreo-cookies
2025-08-31 14:02:46,843 - INFO - Searching Reddit for query: '"Oreo Cookies"'
2025-08-31 14:02:47,343 - INFO - Searching NewsAPI for query: '("Oreo Cookies") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:47,437 - INFO - Using cached stock price for MDLZ: $61.44
2025-08-31 14:02:47,532 - INFO - Successfully saved metrics for snack_id: 5
2025-08-31 14:02:47,533 - INFO - Finished processing for oreo-cookies. Log summary:
2025-08-31 14:02:47,533 - INFO - Google Trends Score: 63
2025-08-31 14:02:47,533 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:47,533 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:47,533 - INFO - Stock Price for MDLZ: $61.44
2025-08-31 14:02:47,533 - INFO - Processing: monster-energy
2025-08-31 14:02:47,850 - INFO - Searching Reddit for query: '"Monster Energy"'
2025-08-31 14:02:48,361 - INFO - Searching NewsAPI for query: '("Monster Energy") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:48,480 - INFO - Starting Stock Price Lookup for MNST
2025-08-31 14:02:48,614 - INFO - Successfully saved metrics for snack_id: 19
2025-08-31 14:02:48,614 - INFO - Finished processing for monster-energy. Log summary:
2025-08-31 14:02:48,615 - INFO - Google Trends Score: 64
2025-08-31 14:02:48,615 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:48,615 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:48,615 - INFO - Stock Price for MNST: $62.41
2025-08-31 14:02:48,615 - INFO - Processing: pepsi
2025-08-31 14:02:48,923 - INFO - Searching Reddit for query: '"Pepsi"'
2025-08-31 14:02:49,542 - INFO - Searching NewsAPI for query: '("Pepsi") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:49,762 - INFO - Using cached stock price for PEP: $148.65
2025-08-31 14:02:49,857 - INFO - Successfully saved metrics for snack_id: 8
2025-08-31 14:02:49,857 - INFO - Finished processing for pepsi. Log summary:
2025-08-31 14:02:49,857 - INFO - Google Trends Score: 42
2025-08-31 14:02:49,857 - INFO - Reddit Mentions: 2, Avg Sentiment: 0.5334
2025-08-31 14:02:49,857 - INFO - News Articles: 4, Avg Sentiment: 0.2099
2025-08-31 14:02:49,857 - INFO - Stock Price for PEP: $148.65
2025-08-31 14:02:49,859 - INFO - Processing: kit-kat
2025-08-31 14:02:50,173 - INFO - Searching Reddit for query: '"Kit Kat"'
2025-08-31 14:02:50,660 - INFO - Searching NewsAPI for query: '("Kit Kat") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:50,770 - INFO - Using cached stock price for HSY: $183.75
2025-08-31 14:02:50,867 - INFO - Successfully saved metrics for snack_id: 16
2025-08-31 14:02:50,867 - INFO - Finished processing for kit-kat. Log summary:
2025-08-31 14:02:50,867 - INFO - Google Trends Score: 45
2025-08-31 14:02:50,867 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:50,867 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:50,867 - INFO - Stock Price for HSY: $183.75
2025-08-31 14:02:50,867 - INFO - Processing: fanta
2025-08-31 14:02:51,201 - INFO - Searching Reddit for query: '"Fanta"'
2025-08-31 14:02:52,393 - INFO - Searching NewsAPI for query: '("Fanta") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:52,654 - INFO - Using cached stock price for KO: $68.99
2025-08-31 14:02:52,750 - INFO - Successfully saved metrics for snack_id: 1
2025-08-31 14:02:52,750 - INFO - Finished processing for fanta. Log summary:
2025-08-31 14:02:52,750 - INFO - Google Trends Score: 78
2025-08-31 14:02:52,750 - INFO - Reddit Mentions: 10, Avg Sentiment: 0.4000
2025-08-31 14:02:52,750 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:52,750 - INFO - Stock Price for KO: $68.99
2025-08-31 14:02:52,750 - INFO - Processing: sprite
2025-08-31 14:02:53,069 - INFO - Searching Reddit for query: '"Sprite"'
2025-08-31 14:02:53,393 - INFO - Searching NewsAPI for query: '("Sprite") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:53,661 - INFO - Using cached stock price for KO: $68.99
2025-08-31 14:02:53,758 - INFO - Successfully saved metrics for snack_id: 3
2025-08-31 14:02:53,758 - INFO - Finished processing for sprite. Log summary:
2025-08-31 14:02:53,760 - INFO - Google Trends Score: 55
2025-08-31 14:02:53,760 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:53,760 - INFO - News Articles: 2, Avg Sentiment: -0.2553
2025-08-31 14:02:53,760 - INFO - Stock Price for KO: $68.99
2025-08-31 14:02:53,760 - INFO - Processing: tostitos
2025-08-31 14:02:54,051 - INFO - Searching Reddit for query: '"Tostitos"'
2025-08-31 14:02:54,867 - INFO - Searching NewsAPI for query: '("Tostitos") NOT stock NOT shares NOT earnings NOT nasdaq NOT nyse'
2025-08-31 14:02:55,110 - INFO - Using cached stock price for PEP: $148.65
2025-08-31 14:02:55,207 - INFO - Successfully saved metrics for snack_id: 14
2025-08-31 14:02:55,207 - INFO - Finished processing for tostitos. Log summary:
2025-08-31 14:02:55,207 - INFO - Google Trends Score: 0
2025-08-31 14:02:55,207 - INFO - Reddit Mentions: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:55,207 - INFO - News Articles: 0, Avg Sentiment: 0.0000
2025-08-31 14:02:55,207 - INFO - Stock Price for PEP: $148.65
2025-08-31 14:02:55,207 - INFO - Database connection closed.
